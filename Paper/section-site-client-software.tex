\section {Site client software}

SpaceMon client tools are installed at the sites for processing storage dumps and uploading aggregated
space usage information into the central data store.  Deployment campaign at the sites started with 
the prototype of the client tool developed within PhEDEx software framework \cite{phedexframework} and 
presented in \cite{spacemon}. 

New SpaceMon client software includes the following main components: 
 \begin{itemize}
\item {\it Record} -  holds aggregated node space usage info 
\item {\it StorageDump} - machine representation of the storage dump info
\item {\it Format (XML, TXT) } - rules for parsing storage dump in corresponding format
\item {\it RecordIO } - various input/output operations, such as read or write Record to file, upload or download from the central database via data service, compare two records
\item {\it Aggregate } - algorithm to convert StorageDump into Record   
 \end{itemize}

Components-based design allows for easy extentions of the functionality and separates the workflow
from the implementation details. 
Additional work has been done to eliminate dependency on PhEDEx for independent packaging and release management. 
Particularly, PhEDEx Namespace framework originally used for supporting various storage technologies is replaced
by Format framework, which implements similar idea of plugins used for various storage dump formats.
